# ETL Extract, Transformation, and Load System

ETL系统在资源系统和DW/BI展示层之间，由工作区、实例化的数据结构和一组进程组成。

> The extract, transformation, and load (ETL) system of the DW/BI environment consists of a work area, instantiated data structures, and a set of processes. The ETL system is everything between the operational source systems and the DW/BI presentation area. 

## Extraction
提取是将数据导入数据仓库环境的第一步。提取是指读取和理解源数据，并将所需数据复制到ETL系统中，以便进一步操作。此时，数据属于数据仓库。
> Extraction is the first step in the process of getting data into the data warehouse environment. Extracting means reading and understanding the source data and copying the data needed into the ETL system for further manipulation. At this point, the data belongs to the data warehouse.

## transformations
将数据提取到ETL系统后，有多种转换工作可以进行，例如清理数据（更正拼写错误、解决域冲突、处理缺少的元素或解析为标准格式）、组合来自多个源的数据以及删除重复数据。ETL系统通过这些清晰任务为数据增加价值。此外，这些活动可以被构造为创建诊断元数据，在一定程度上使业务流程重组以随着时间的推移提高源系统中的数据质量。
> After the data is extracted to the ETL system, there are numerous potential transformations, such as cleansing the data (correcting misspellings, resolving domain conflicts, dealing with missing elements, or parsing into standard formats), combining data from multiple sources, and de-duplicating data. The ETL system adds value to the data with these cleansing and conforming tasks by changing the data and enhancing it. In addition, these activities can be architected to create diagnostic metadata, ventually leading to business process reengineering to improve data quality in the source systems over time

## Load
ETL过程的最后一步是构造物理结构并将数据加载到展现层。因为ETL系统的主要任务是在交付维度和事实表，所以这些子系统是关键的。这些定义的子系统中的许多都集中在维度表处理上，例如代理键分配、代码查找以提供适当的描述、拆分或组合列以显示适当的数据值，或者将底层的第三范式表结构加入到非规范化的表结构中。与此相反，事实表通常很大，加载起来很费时，但是为表示区域准备它们通常很简单。当维度模型中的维度和事实表被更新、索引、提供适当的聚合并进一步保证质量时，业务社区会收到新数据已发布的通知。
> The final step of the ETL process is the physical structuring and loading of data into the presentation area’s target dimensional models. Because the primary mission of the ETL system is to hand off the dimension and fact tables in the delivery step, these subsystems are critical. Many of these defined subsystems focus on dimension table processing, such as surrogate key assignments, code lookups to provide appropriate descriptions, splitting, or combining columns to present the appropriate data values, or joining underlying third normal form table structures into flattened denormalized dimensions. In contrast, fact tables are typically large and time consuming to load, but preparing them for the presentation area is typically straightforward. When the dimension and fact tables in a dimensional model have been updated, indexed, supplied with appropriate aggregates,and further quality assured, the business community is notifi ed that the new data has been published.

## ETL中对3NF结构数据的取舍
在将ETL系统中的数据加载到表示区域的维度结构中进行查询和报告之前，是否应将其重新调整为3NF结构，这仍然是业界的担忧。ETL系统通常由简单的排序和顺序处理活动控制。在许多情况下，ETL系统不是基于关系技术，而是依赖于一个扁平的文件系统。在已经验证数据是否符合定义的一对一和多对一的业务规则后，只在数据再次转换为用于BI表示区域的非规范化结构之前采取构建3nf物理数据库的最终步骤可能是毫无意义的。
> There remains industry consternation about whether the data in the ETL system should be repurposed into physical normalized structures prior to loading into the presentation area’s dimensional structures for querying and reporting. The ETL system is typically dominated by the simple activities of sorting and sequential processing. In many cases, the ETL system is not based on relational technology but instead may rely on a system of flat files. After validating the data for conformance with the defined one-to-one and many-to-one business rules, it may be pointless to take the final step of building a 3NF physical database, just before transforming the data once again into denormalized structures for the BI presentation area.

但是，在某些情况下，数据会以3nf格式传入ETL系统。在这些情况下，ETL系统开发人员可能更容易使用规范化结构执行清理和转换任务。虽然用于ETL处理的规范化数据库是可以接受的，但是我们对这种方法有一些保留。创建ETL的规范化结构和用于表示的维度结构意味着数据可能会被提取、转换并加载两次到规范化数据库中，然后在加载维度模型时再次加载。显然，这两个步骤的过程需要投入更多的时间来进行开发，需要更多的时间来定期加载或更新数据，并且需要更多的容量来存储数据的多个副本。归根结底，这通常意味着需要更大的开发、持续的支持和硬件平台预算。不幸的是，一些DW/BI计划失败了，因为它们将所有的精力和资源都集中在构建规范化的结构上，而没有将时间分配到研发更能支持业务决策的维度表中。尽管企业范围内的数据一致性是DW/BI环境的基本目标，但如果这些结构尚不存在，那么可能存在比在ETL系统中物理创建规范化表更有效、成本更低的方法。

However, there are cases in which the data arrives at the doorstep of the ETL system in a 3NF relational format. In these situations, the ETL system developers may be more comfortable performing the cleansing and transformation tasks using normalized structures. Although a normalized database for ETL processing is acceptable, we have some reservations about this approach. The creation of both normalized structures for the ETL and dimensional structures for presentation means that the data is potentially extracted, transformed, and loaded twice—once into the normalized database and then again when you load the dimensional model. Obviously, this two-step process requires more time and investment for the development, more time for the periodic loading or updating of data, and more capacity to store the multiple copies of the data. At the bottom line, this typically translates into the need for larger development, ongoing support, and hardware platform budgets.Unfortunately, some DW/BI initiatives have failed miserably because they focused all their energy and resources on constructing the normalized structures rather than allocating time to developing a dimensional presentation area that supports improved business decision making. Although enterprise-wide data consistency is a fundamental goal of the DW/BI environment, there may be effective and less costly approaches than physically creating normalized tables in the ETL system, if these structures don’t already exist.

创建一个规范化的数据库来支持ETL过程是可以接受的；但是，这不是最终目标。规范化结构必须禁止用户查询，因为它们违背了可理解性和性能的双重目标。
It is acceptable to create a normalized database to support the ETL processes; however, this is not the end goal. The normalized structures must be off-limits to user queries because they defeat the twin goals of understandability and performance.