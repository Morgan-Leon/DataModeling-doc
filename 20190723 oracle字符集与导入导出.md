# Oracle 字符集及数据导入导出

#### 查询oracle server端的字符集

` SQL> select userenv('language') from dual; `

#### 查询dmp文件的字符集

用oracle的exp工具导出的dmp文件也包含了字符集信息，dmp文件的第2和第3个字节记录了dmp文件的字符集。如果dmp文件不大，比如只有几M或几十M，可以用UltraEdit打开(16进制方式)，看第2第3个字节的内容，如0354，然后用以下SQL查出它对应的字符集:

```
SQL> select nls_charset_name(to_number('0354','xxxx')) from dual;

ZHS16GBK

```

如果dmp文件很大，比如有2G以上(这也是最常见的情况)，用文本编辑器打开很慢或者完全打不开，可以用以下命令(在unix主机上):

` cat exp.dmp |od -x|head -1|awk '{print $2 $3}'|cut -c 3-6 `

然后用上述SQL也可以得到它对应的字符集。

#### 查询oracle client端的字符集

在windows平台下，就是注册表里面相应OracleHome的NLS_LANG。还可以在dos窗口里面自己设置，

比如: set nls_lang=AMERICAN_AMERICA.ZHS16GBK

这样就只影响这个窗口里面的环境变量。

在unix平台下，就是环境变量NLS_LANG。
```
$echo $NLS_LANG

AMERICAN_AMERICA.ZHS16GBK
```

     1)UNIX环境
         $NLS_LANG=“simplified chinese”_china.zhs16gbk
         $export NLS_LANG
         编辑oracle用户的profile文件
    2)Windows环境
         编辑注册表
         Regedit.exe ---》 HKEY_LOCAL_MACHINE ---》SOFTWARE ---》 ORACLE-HOME

## Oracle 数据导入与导出

Oracle客户端可以使用
exp / imp 命令进行数据的导入导出 （单张表或少量数据）

Oracle服务端整库导入导出使用：

expdp / impdp

ex：

` impdp username/password DIRECOTRY=DUMP_DIR DUMPFILE=expdp.dmp full=y `

其中 DUMP_DIR 可以使用 ` SQL> SELECT  * FROM  dba_directories `  命令查出

expdp.dmp文件必须由expdp生成，并放到DUMP_DIR所指代目录下。


# 参考资料：

[Oracle 字符集的查看和修改](https://www.cnblogs.com/rootq/articles/2049324.html)
