#20190819 JAVA 消息队列 生产者消费者问题

1、使用信号灯解决
2、emptyCount 空位信号灯，生产者每生产一个减一
3、fillCount 数据项信号灯，消费者没消耗一个减一
4、mutex 占用信号灯，队列被占用时为1、没有则为0

``` 
semaphore mutex = 1;
semaphore fillCount = 0;
semaphore emptyCount = BUFFER_SIZE;

function producer(){
    while(true){
        item = producer.produce();
        down(emptyCount);
            down(mutex);
                putIntoBuffer(item);
            up(mutex);
        up(fillCount)
    }
} 

function consumer(){
    while(true){
        down(fillCount);
            down(mutex);
                item = removeFromBuffer(item);
            up(mutex);
        up(emptyCount);
        consumer.consume(item);
    }
} 